import { getDiscountedProducts, calculateSavings } from '../data/products';
import ProductCard from '../components/ProductCard';
import './Sales.css';

function Sales() {
  const discountedProducts = getDiscountedProducts();
  const totalSavings = discountedProducts.reduce((total, product) => {
    return total + calculateSavings(product);
  }, 0);

  return (
    <div className="sales-page">
      <div className="sales-container">
        <div className="sales-header">
          <h1 className="sales-title">–ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏</h1>
          <p className="sales-subtitle">
            –°—ç–∫–æ–Ω–æ–º—å—Ç–µ –¥–æ {Math.max(...discountedProducts.map(p => p.discount || 0))}% –Ω–∞ selected —Ç–æ–≤–∞—Ä–∞—Ö
          </p>
          
          <div className="savings-banner">
            <div className="savings-amount">
              –û–±—â–∞—è —ç–∫–æ–Ω–æ–º–∏—è: <span>{totalSavings} ‚ÇΩ</span>
            </div>
            <p>–ù–µ —É–ø—É—Å—Ç–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —Å—Ç–∏–ª—å–Ω—ã–µ –∫–æ—Å—Ç—é–º—ã –ø–æ –≤—ã–≥–æ–¥–Ω—ã–º —Ü–µ–Ω–∞–º!</p>
          </div>
        </div>

        <div className="discounted-products">
          <h2>–¢–æ–≤–∞—Ä—ã —Å–æ —Å–∫–∏–¥–∫–æ–π</h2>
          
          {discountedProducts.length > 0 ? (
            <div className="products-grid">
              {discountedProducts.map(product => (
                <ProductCard key={product.id} product={product} />
              ))}
            </div>
          ) : (
            <div className="no-discounts">
              <h3>–°–µ–π—á–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏–π</h3>
              <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏, –Ω–æ–≤—ã–µ —Å–∫–∏–¥–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ!</p>
            </div>
          )}
        </div>

        <div className="sales-info">
          <h3>–ü–æ—á–µ–º—É –ø–æ–∫—É–ø–∞—Ç—å —É –Ω–∞—Å –≤—ã–≥–æ–¥–Ω–æ?</h3>
          <div className="benefits-grid">
            <div className="benefit">
              <div className="benefit-icon">üéÅ</div>
              <h4>–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∞–∫—Ü–∏–∏</h4>
              <p>–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–µ–∑–æ–Ω–∞</p>
            </div>
            <div className="benefit">
              <div className="benefit-icon">‚≠ê</div>
              <h4>–°–∫–∏–¥–∫–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º</h4>
              <p>–ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫ –¥–ª—è –Ω–∞—à–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</p>
            </div>
            <div className="benefit">
              <div className="benefit-icon">üöö</div>
              <h4>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</h4>
              <p>–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5000 —Ä—É–±–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

export default Sales;